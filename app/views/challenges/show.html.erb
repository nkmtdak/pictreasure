<div class="challenge-container">
  <header class="challenge-header">
  <section class="challenge-status">
  <% if @challenge.cleared? %>
    <div class="alert alert-success">
      <h2>Challenge Cleared!</h2>ÃŸ
      <p>Congratulations! You've successfully completed this challenge.</p>
    </div>
  <% else %>
    <div class="alert alert-info">
      <h2>Challenge In Progress</h2>
      <p>Keep trying! Upload a photo that matches the challenge.</p>
    </div>
  <% end %>

  <% if @latest_similarity %>
    <div class="similarity-info">
      <h3>Latest Attempt Similarity: <%= (@latest_similarity * 100).round(2) %>%</h3>
      <p>You need at least 90% similarity to clear the challenge.</p>
    </div>
  <% end %>
</section>
    <h1 class="challenge-title"><%= @challenge.title %></h1>
    <p class="challenge-description"><%= @challenge.description %></p>
    
    <% if current_user && (current_user.admin? || @challenge.user == current_user) %>
      <div class="challenge-actions">
        <%# Route: edit_challenge_path(@challenge) %>
        <%= link_to 'Edit Challenge', edit_challenge_path(@challenge), class: 'btn btn-primary' %>
        
        <%# Route: challenge_path(@challenge), method: :delete %>
        <%= link_to 'Delete Challenge', challenge_path(@challenge), method: :delete, 
            data: { confirm: 'Are you sure you want to delete this challenge?' }, 
            class: 'btn btn-danger' %>
      </div>
    <% end %>
  </header>

  <section class="photos-section">
    <h2>Uploaded Photos</h2>
  <div class="photo-grid">
    <% @photos.order(created_at: :desc).each do |photo| %>
      <div class="photo-item">
        <h3 class="photo-title"><%= photo.title %></h3>
        <%= image_tag photo.image, class: 'photo-image' if photo.image.attached? %>
        <p class="photo-similarity">Similarity: <%= (photo.similarity * 100).round(2) %>%</p>
      </div>
      <% end %>
    </div>
    
    <%# Route: new_challenge_photo_path(@challenge) %>
    <%= link_to 'Upload Photo', new_challenge_photo_path(@challenge), class: 'btn btn-success upload-photo-btn' %>
  </section>
</div>